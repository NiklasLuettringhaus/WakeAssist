; ===============================================================
; PlatformIO Project Configuration File for WakeAssist
; ===============================================================
; This file configures the build environment for the ESP32
;
; WHAT IS PLATFORMIO?
; PlatformIO is a professional embedded development platform
; that makes it easier to manage libraries and build ESP32 projects
;
; HOW TO USE:
; 1. Install PlatformIO: https://platformio.org/install
; 2. Open this project folder in VS Code with PlatformIO extension
; 3. Click "Build" to compile
; 4. Click "Upload" to program your ESP32
; ===============================================================

[env:esp32dev]
; Platform: ESP32 chipset (specify exact version for reproducibility)
platform = espressif32

; Board: ESP32 DevKit V1 (30-pin version)
; This is the most common ESP32 development board
board = esp32dev

; Framework: Arduino - provides familiar Arduino functions
; Makes ESP32 programming similar to Arduino
framework = arduino

; Serial Monitor Speed: 115200 baud (standard for ESP32)
; This is the speed for Serial.print() debugging messages
monitor_speed = 115200

; Upload Speed: 921600 baud (fast upload to ESP32)
; Can reduce to 115200 if upload fails
upload_speed = 921600

; ===============================================================
; LIBRARY DEPENDENCIES
; ===============================================================
; PlatformIO will automatically download these libraries
; when you build the project
;
; FORMAT: author/library_name @ version
; Using specific versions ensures reproducible builds

lib_deps =
    ; WiFiManager - Provides captive portal for WiFi setup
    ; Makes it easy for non-technical users to configure WiFi
    ; GitHub: https://github.com/tzapu/WiFiManager
    tzapu/WiFiManager @ ^2.0.17

    ; ArduinoJson - JSON parsing library
    ; Used to parse Telegram API responses
    ; Documentation: https://arduinojson.org/
    bblanchon/ArduinoJson @ ^7.0.4

; ===============================================================
; BUILD FLAGS
; ===============================================================
; These flags configure the compiler and enable features

build_flags =
    ; Enable debug messages in Serial Monitor
    -D CORE_DEBUG_LEVEL=3

    ; Set Arduino framework to use latest version
    -D ARDUINO_RUNNING_CORE=1

    ; Increase stack size for WiFi operations (prevents crashes)
    -D CONFIG_ARDUINO_LOOP_STACK_SIZE=8192

    ; Enable ESP32 specific features
    -D BOARD_HAS_PSRAM=0

; ===============================================================
; FILE SYSTEM (SPIFFS)
; ===============================================================
; SPIFFS = SPI Flash File System
; Used to store the WiFi setup webpage (setup.html)
;
; The 'data/' folder will be uploaded to ESP32 flash memory
; Access files in code with: SPIFFS.open("/setup.html")

board_build.filesystem = spiffs

; Partition scheme: default (can store ~1.5MB of code + SPIFFS)
; If you need more space for files, use: huge_app (3MB code, minimal SPIFFS)
board_build.partitions = default.csv

; ===============================================================
; MONITORING & DEBUGGING
; ===============================================================

; Monitor Filters: Clean up serial output
; 'esp32_exception_decoder' shows readable stack traces on crashes
monitor_filters =
    esp32_exception_decoder

; Enable color output in terminal
monitor_flags =
    --raw

; ===============================================================
; ADVANCED OPTIONS (Optional, uncomment if needed)
; ===============================================================

; OTA (Over-The-Air) Updates - Update firmware via WiFi
; Uncomment these after you get WiFi working
; upload_protocol = espota
; upload_port = 192.168.1.xxx  ; Your ESP32's IP address

; Custom Partition Table (for future expansion)
; Uncomment if you need custom flash layout
; board_build.partitions = custom_partitions.csv

; ===============================================================
; NOTES FOR BEGINNERS:
; ===============================================================
; - Lines starting with ';' are comments
; - Don't modify settings unless you know what you're doing
; - If upload fails, try reducing upload_speed to 115200
; - Serial monitor shows debug output from Serial.print()
; - Press "Upload and Monitor" to see output immediately after upload
; ===============================================================
